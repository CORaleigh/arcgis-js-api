// COPYRIGHT Â© 2018 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.11/esri/copyright.txt for details.

define(["require","exports","./compilerUtils","./kebabDictionary","./wgs84Constants","../geometry/support/WKIDUnitConversion"],function(e,t,n,s,i,r){function a(e,t,n){return e*L[n].units[t].inBaseUnits}function u(e,t,n){return e/L[n].units[t].inBaseUnits}function c(e){var t=N[e];if(t)return t;throw new Error("unknown measure")}function o(e){return L[e].baseUnit}function l(e){return o(c(e))}function f(e,t){return void 0===t&&(t=null),t=t||c(e),L[t].baseUnit===e}function U(e,t,n){if(t===n)return e;var s=c(t);if(s!==c(n))throw new Error("incompatible units");var i=f(t,s)?e:a(e,t,s);return f(n,s)?i:u(i,n,s)}function m(e,t){return U(e,t,"meters")<3e3?"meters":"kilometers"}function d(e,t){return U(e,t,"meters")<1e5?"meters":"kilometers"}function B(e,t){return U(e,t,"feet")<1e3?"feet":"miles"}function b(e,t){return U(e,t,"feet")<1e5?"feet":"miles"}function k(e,t){return U(e,t,"square-meters")<3e6?"square-meters":"square-kilometers"}function h(e,t){return U(e,t,"square-feet")<1e6?"square-feet":"square-miles"}function g(e,t,n){return void 0===n&&(n=i.wgs84Radius),U(e,t,"meters")/(n*Math.PI/180)}function y(e){return F.fromJSON(e.toLowerCase())||null}function p(e){return F.toJSON(e)||null}function v(e){var t=q(e);return t>1e5?1:t}function _(e){return q(e)>1e5?"meters":M(e)}function q(e){return w(e)||t.decDegToMeters}function w(e){var t,n,s;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)s=R.values[R[t]];else if(n&&-1!==n.search(/^PROJCS/i)){var i=P.exec(n);i&&i[1]&&(s=parseFloat(i[1].split(",")[1]))}return s}function M(e){var t,n,s;if(null!=e&&("object"==typeof e?(t=e.wkid,n=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(n=e)),t)s=R.units[R[t]];else if(n&&-1!==n.search(/^PROJCS/i)){var i=P.exec(n);i&&i[1]&&(i=/[\\"\\']{1}([^\\"\\']+)/.exec(i[1]),s=i&&i[1])}return s?y(s):null}function S(e){if(!e)return null;var t=M(e);switch(t){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:return null;default:n.neverReached(t)}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.inchesPerMeter=39.37,t.decDegToMeters=i.wgs84Radius*Math.PI/180;var P=/UNIT\[([^\]]+)\]\]$/i,R=r,F=s.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),I={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}},O=function(e){return e*e},T={"square-millimeters":{inBaseUnits:O(.001)},"square-centimeters":{inBaseUnits:O(.01)},"square-decimeters":{inBaseUnits:O(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:O(1e3)},"square-inches":{inBaseUnits:O(.0254)},"square-feet":{inBaseUnits:O(.3048)},"square-yards":{inBaseUnits:O(.9144)},"square-miles":{inBaseUnits:O(1609.344)},"square-us-feet":{inBaseUnits:O(1200/3937)},acres:{inBaseUnits:.0015625*O(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}},D=function(e){return e*e*e},J={liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*D(.001)},"cubic-centimeters":{inBaseUnits:1e3*D(.01)},"cubic-decimeters":{inBaseUnits:1e3*D(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*D(1e3)},"cubic-inches":{inBaseUnits:1e3*D(.0254)},"cubic-feet":{inBaseUnits:1e3*D(.3048)},"cubic-yards":{inBaseUnits:1e3*D(.9144)},"cubic-miles":{inBaseUnits:1e3*D(1609.344)}},C={radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}},L={length:{baseUnit:"meters",units:I},area:{baseUnit:"square-meters",units:T},volume:{baseUnit:"liters",units:J},angle:{baseUnit:"radians",units:C}},N=function(){var e={};for(var t in L)for(var n in L[t].units)e[n]=t;return e}();t.measureForUnit=c,t.baseUnitForMeasure=o,t.baseUnitForUnit=l,t.isBaseUnit=f,t.convertUnit=U,t.preferredMetricLengthUnit=m,t.preferredMetricVerticalLengthUnit=d,t.preferredImperialLengthUnit=B,t.preferredImperialVerticalLengthUnit=b,t.preferredMetricAreaUnit=k,t.preferredImperialAreaUnit=h,t.lengthToDegrees=g,t.unitFromRESTJSON=y,t.unitToRESTJSON=p,t.getMetersPerVerticalUnitForSR=v,t.getVerticalUnitStringForSR=_,t.getMetersPerUnitForSR=q,t.getMetersPerUnit=w,t.getUnitString=M,t.getDefaultUnitSystem=S});