{"version":3,"file":"has.js","sourceRoot":"","sources":["has.ts"],"names":[],"mappings":"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","sourcesContent":["import global from '../shim/global';\nimport { Require, Config } from './loader';\n\n/**\n * The valid return types from a feature test\n */\nexport type FeatureTestResult = boolean | string | number | undefined | void;\n\n/**\n * A function that tests for a feature and returns a result\n */\nexport type FeatureTest = () => FeatureTestResult;\n\n/**\n * A cache of results of feature tests\n */\nexport const testCache: { [feature: string]: FeatureTestResult } = {};\n\n/**\n * A cache of the un-resolved feature tests\n */\nexport const testFunctions: { [feature: string]: FeatureTest } = {};\n\nexport interface StaticHasFeatures {\n\t[feature: string]: FeatureTestResult;\n}\n\nexport interface DojoHasEnvironment {\n\t/**\n\t * Static features defined in the enviornment that should be used by the `has` module\n\t * instead of run-time detection.\n\t */\n\tstaticFeatures?: StaticHasFeatures | (() => StaticHasFeatures);\n}\n\ndeclare global {\n\tinterface Window {\n\t\t/**\n\t\t * The `dojo/has` enviornment which provides configuration when the module is\n\t\t * loaded.\n\t\t */\n\t\tDojoHasEnvironment?: DojoHasEnvironment;\n\t}\n}\n\n/* Grab the staticFeatures if there are available */\nconst { staticFeatures }: DojoHasEnvironment = global.DojoHasEnvironment || {};\n\n/* Cleaning up the DojoHasEnviornment */\nif ('DojoHasEnvironment' in global) {\n\tdelete global.DojoHasEnvironment;\n}\n\n/**\n * Custom type guard to narrow the `staticFeatures` to either a map or a function that\n * returns a map.\n *\n * @param value The value to guard for\n */\nfunction isStaticFeatureFunction(value: any): value is (() => StaticHasFeatures) {\n\treturn typeof value === 'function';\n}\n\n/**\n * The cache of asserted features that were available in the global scope when the\n * module loaded\n */\nconst staticCache: StaticHasFeatures = staticFeatures\n\t? isStaticFeatureFunction(staticFeatures)\n\t\t? staticFeatures.apply(global)\n\t\t: staticFeatures\n\t: {}; /* Providing an empty cache, if none was in the environment\n\n/**\n * AMD plugin function.\n *\n * Conditional loads modules based on a has feature test value.\n *\n * @param resourceId Gives the resolved module id to load.\n * @param require The loader require function with respect to the module that contained the plugin resource in its\n *                dependency list.\n * @param load Callback to loader that consumes result of plugin demand.\n */\nexport function load(resourceId: string, require: Require, load: (value?: any) => void, config?: Config): void {\n\tresourceId ? require([resourceId], load) : load();\n}\n\n/**\n * AMD plugin function.\n *\n * Resolves resourceId into a module id based on possibly-nested tenary expression that branches on has feature test\n * value(s).\n *\n * @param resourceId The id of the module\n * @param normalize Resolves a relative module id into an absolute module id\n */\nexport function normalize(resourceId: string, normalize: (moduleId: string) => string): string | null {\n\tconst tokens: RegExpMatchArray = resourceId.match(/[\\?:]|[^:\\?]*/g) || [];\n\tlet i = 0;\n\n\tfunction get(skip?: boolean): string | null {\n\t\tconst term = tokens[i++];\n\t\tif (term === ':') {\n\t\t\t// empty string module name, resolves to null\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// postfixed with a ? means it is a feature to branch on, the term is the name of the feature\n\t\t\tif (tokens[i++] === '?') {\n\t\t\t\tif (!skip && has(term)) {\n\t\t\t\t\t// matched the feature, get the first value from the options\n\t\t\t\t\treturn get();\n\t\t\t\t} else {\n\t\t\t\t\t// did not match, get the second value, passing over the first\n\t\t\t\t\tget(true);\n\t\t\t\t\treturn get(skip);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// a module\n\t\t\treturn term;\n\t\t}\n\t}\n\n\tconst id = get();\n\n\treturn id && normalize(id);\n}\n\n/**\n * Check if a feature has already been registered\n *\n * @param feature the name of the feature\n */\nexport function exists(feature: string): boolean {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\treturn Boolean(\n\t\tnormalizedFeature in staticCache || normalizedFeature in testCache || testFunctions[normalizedFeature]\n\t);\n}\n\n/**\n * Register a new test for a named feature.\n *\n * @example\n * has.add('dom-addeventlistener', !!document.addEventListener);\n *\n * @example\n * has.add('touch-events', function () {\n *    return 'ontouchstart' in document\n * });\n *\n * @param feature the name of the feature\n * @param value the value reported of the feature, or a function that will be executed once on first test\n * @param overwrite if an existing value should be overwritten. Defaults to false.\n */\nexport function add(feature: string, value: FeatureTest | FeatureTestResult, overwrite: boolean = false): void {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (exists(normalizedFeature) && !overwrite && !(normalizedFeature in staticCache)) {\n\t\tthrow new TypeError(`Feature \"${feature}\" exists and overwrite not true.`);\n\t}\n\n\tif (typeof value === 'function') {\n\t\ttestFunctions[normalizedFeature] = value;\n\t} else {\n\t\ttestCache[normalizedFeature] = value;\n\t\tdelete testFunctions[normalizedFeature];\n\t}\n}\n\n/**\n * Return the current value of a named feature.\n *\n * @param feature The name of the feature to test.\n */\nexport default function has(feature: string): FeatureTestResult {\n\tlet result: FeatureTestResult;\n\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (normalizedFeature in staticCache) {\n\t\tresult = staticCache[normalizedFeature];\n\t} else if (testFunctions[normalizedFeature]) {\n\t\tresult = testCache[normalizedFeature] = testFunctions[normalizedFeature].call(null);\n\t\tdelete testFunctions[normalizedFeature];\n\t} else if (normalizedFeature in testCache) {\n\t\tresult = testCache[normalizedFeature];\n\t} else {\n\t\tthrow new TypeError(`Attempt to detect unregistered has feature \"${feature}\"`);\n\t}\n\n\treturn result;\n}\n\n/*\n * Out of the box feature tests\n */\nadd('public-path', undefined);\n\n/* flag for dojo debug, default to false */\nadd('dojo-debug', false);\n\n/* Detects if the environment is \"browser like\" */\nadd('host-browser', typeof document !== 'undefined' && typeof location !== 'undefined');\n\n/* Detects if the environment appears to be NodeJS */\nadd('host-node', function() {\n\tif (typeof process === 'object' && process.versions && process.versions.node) {\n\t\treturn process.versions.node;\n\t}\n});\n\nadd('fetch', 'fetch' in global && typeof global.fetch === 'function', true);\n\nadd(\n\t'es6-array',\n\t() => {\n\t\treturn (\n\t\t\t['from', 'of'].every((key) => key in global.Array) &&\n\t\t\t['findIndex', 'find', 'copyWithin'].every((key) => key in global.Array.prototype)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-array-fill',\n\t() => {\n\t\tif ('fill' in global.Array.prototype) {\n\t\t\t/* Some versions of Safari do not properly implement this */\n\t\t\treturn ([1] as any).fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd('es7-array', () => 'includes' in global.Array.prototype, true);\n\n/* Map */\nadd(\n\t'es6-map',\n\t() => {\n\t\tif (typeof global.Map === 'function') {\n\t\t\t/*\n\t\tIE11 and older versions of Safari are missing critical ES6 Map functionality\n\t\tWe wrap this in a try/catch because sometimes the Map constructor exists, but does not\n\t\ttake arguments (iOS 8.4)\n\t\t */\n\t\t\ttry {\n\t\t\t\tconst map = new global.Map([[0, 1]]);\n\n\t\t\t\treturn (\n\t\t\t\t\tmap.has(0) &&\n\t\t\t\t\ttypeof map.keys === 'function' &&\n\t\t\t\t\thas('es6-symbol') &&\n\t\t\t\t\ttypeof map.values === 'function' &&\n\t\t\t\t\ttypeof map.entries === 'function'\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* istanbul ignore next: not testing on iOS at the moment */\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Math */\nadd(\n\t'es6-math',\n\t() => {\n\t\treturn [\n\t\t\t'clz32',\n\t\t\t'sign',\n\t\t\t'log10',\n\t\t\t'log2',\n\t\t\t'log1p',\n\t\t\t'expm1',\n\t\t\t'cosh',\n\t\t\t'sinh',\n\t\t\t'tanh',\n\t\t\t'acosh',\n\t\t\t'asinh',\n\t\t\t'atanh',\n\t\t\t'trunc',\n\t\t\t'fround',\n\t\t\t'cbrt',\n\t\t\t'hypot'\n\t\t].every((name) => typeof global.Math[name] === 'function');\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-math-imul',\n\t() => {\n\t\tif ('imul' in global.Math) {\n\t\t\t/* Some versions of Safari on ios do not properly implement this */\n\t\t\treturn (Math as any).imul(0xffffffff, 5) === -5;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Object */\nadd(\n\t'es6-object',\n\t() => {\n\t\treturn (\n\t\t\thas('es6-symbol') &&\n\t\t\t['assign', 'is', 'getOwnPropertySymbols', 'setPrototypeOf'].every(\n\t\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t\t)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-object',\n\t() => {\n\t\treturn ['values', 'entries', 'getOwnPropertyDescriptors'].every(\n\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t);\n\t},\n\ttrue\n);\n\n/* Observable */\nadd('es-observable', () => typeof global.Observable !== 'undefined', true);\n\n/* Promise */\nadd('es6-promise', () => typeof global.Promise !== 'undefined' && has('es6-symbol'), true);\n\nadd(\n\t'es2018-promise-finally',\n\t() => has('es6-promise') && typeof global.Promise.prototype.finally !== 'undefined',\n\ttrue\n);\n\n/* Set */\nadd(\n\t'es6-set',\n\t() => {\n\t\tif (typeof global.Set === 'function') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n\t\t\tconst set = new global.Set([1]);\n\t\t\treturn set.has(1) && 'keys' in set && typeof set.keys === 'function' && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* String */\nadd(\n\t'es6-string',\n\t() => {\n\t\treturn (\n\t\t\t[\n\t\t\t\t/* static methods */\n\t\t\t\t'fromCodePoint'\n\t\t\t].every((key) => typeof global.String[key] === 'function') &&\n\t\t\t[\n\t\t\t\t/* instance methods */\n\t\t\t\t'codePointAt',\n\t\t\t\t'normalize',\n\t\t\t\t'repeat',\n\t\t\t\t'startsWith',\n\t\t\t\t'endsWith',\n\t\t\t\t'includes'\n\t\t\t].every((key) => typeof global.String.prototype[key] === 'function')\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-string-raw',\n\t() => {\n\t\tfunction getCallSite(callSite: TemplateStringsArray, ...substitutions: any[]) {\n\t\t\tconst result = [...callSite];\n\t\t\t(result as any).raw = callSite.raw;\n\t\t\treturn result;\n\t\t}\n\n\t\tif ('raw' in global.String) {\n\t\t\tlet b = 1;\n\t\t\tlet callSite = getCallSite`a\\n${b}`;\n\n\t\t\t(callSite as any).raw = ['a\\\\n'];\n\t\t\tconst supportsTrunc = global.String.raw(callSite, 42) === 'a\\\\n';\n\n\t\t\treturn supportsTrunc;\n\t\t}\n\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-string',\n\t() => {\n\t\treturn ['padStart', 'padEnd'].every((key) => typeof global.String.prototype[key] === 'function');\n\t},\n\ttrue\n);\n\n/* Symbol */\nadd('es6-symbol', () => typeof global.Symbol !== 'undefined' && typeof Symbol() === 'symbol', true);\n\n/* WeakMap */\nadd(\n\t'es6-weakmap',\n\t() => {\n\t\tif (typeof global.WeakMap !== 'undefined') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n\t\t\tconst key1 = {};\n\t\t\tconst key2 = {};\n\t\t\tconst map = new global.WeakMap([[key1, 1]]);\n\t\t\tObject.freeze(key1);\n\t\t\treturn map.get(key1) === 1 && map.set(key2, 2) === map && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Miscellaneous features */\nadd('microtasks', () => has('es6-promise') || has('host-node') || has('dom-mutationobserver'), true);\nadd(\n\t'postmessage',\n\t() => {\n\t\t// If window is undefined, and we have postMessage, it probably means we're in a web worker. Web workers have\n\t\t// post message but it doesn't work how we expect it to, so it's best just to pretend it doesn't exist.\n\t\treturn typeof global.window !== 'undefined' && typeof global.postMessage === 'function';\n\t},\n\ttrue\n);\nadd('raf', () => typeof global.requestAnimationFrame === 'function', true);\nadd('setimmediate', () => typeof global.setImmediate !== 'undefined', true);\n\n/* DOM Features */\n\nadd(\n\t'dom-mutationobserver',\n\t() => {\n\t\tif (has('host-browser') && Boolean(global.MutationObserver || global.WebKitMutationObserver)) {\n\t\t\t// IE11 has an unreliable MutationObserver implementation where setProperty() does not\n\t\t\t// generate a mutation event, observers can crash, and the queue does not drain\n\t\t\t// reliably. The following feature test was adapted from\n\t\t\t// https://gist.github.com/t10ko/4aceb8c71681fdb275e33efe5e576b14\n\t\t\tconst example = document.createElement('div');\n\t\t\t/* tslint:disable-next-line:variable-name */\n\t\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\t\tconst observer = new HostMutationObserver(function() {});\n\t\t\tobserver.observe(example, { attributes: true });\n\n\t\t\texample.style.setProperty('display', 'block');\n\n\t\t\treturn Boolean(observer.takeRecords().length);\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'dom-webanimation',\n\t() => has('host-browser') && global.Animation !== undefined && global.KeyframeEffect !== undefined,\n\ttrue\n);\n\nadd('abort-controller', () => typeof global.AbortController !== 'undefined');\n\nadd('abort-signal', () => typeof global.AbortSignal !== 'undefined');\n\nadd('dom-intersection-observer', () => has('host-browser') && global.IntersectionObserver !== undefined, true);\n\nadd('dom-resize-observer', () => has('host-browser') && global.ResizeObserver !== undefined, true);\n\nadd('dom-pointer-events', () => has('host-browser') && global.onpointerdown !== undefined, true);\n\nadd('build-elide', false);\n"]}